import psutil

class Disk:
    
    disks = {"total": 0, "used": 0, "partitions": []}
    
    @classmethod
    def all(self):
        for disk in psutil.disk_partitions():
            self.disks["partitions"].append(self.one(disk))

        self.disks["percent"] = self.disks["used"] / self.disks["total"] * 100
        return self.disks
    
    @classmethod
    def one(self, disk):
        disk_usage = psutil.disk_usage(disk.mountpoint)
        self.disks["total"] += disk_usage.total
        self.disks["used"] += disk_usage.used
        return {"disk_mountpoint": disk.mountpoint,
                "disk_fs": disk.fstype,
                "disk_device": disk.device,
                "disk_total": disk_usage.total,
                "disk_used": disk_usage.used,
                "disk_percent": disk_usage.percent,
                }
