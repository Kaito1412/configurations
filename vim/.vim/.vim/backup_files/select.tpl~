{cartfieldlogic}
<select style="margin-bottom:10px;" name="{if $cf_opt_name && $cf_opt_name != ''}{$cf_opt_name}{else}custom{/if}[{$cf.id}]"
        class="pconfig_ styled custom_field_{$cf.id}"  id="custom_field_{$cf.id}"
        onchange="if(typeof (simulateCart)=='function') simulateCart('{if $cf_opt_formId && $cf_opt_formId != ''}{$cf_opt_formId}{else}#cart3{/if}')">
  {foreach from=$cf.items item=cit}
    {if isset($lang[$cit.name])}
      <option value="{$cit.id}"
         {if ((isset($clientdata.cif) 
             && ($cit.name == "es_formjur_524" || $cit.name == "es_idtype_0"))
         || (isset($clientdata.nif) && $cit.name == "es_formjur_1")
         || (isset($clientdata.nif) 
             && (preg_match('/^[A-Za-z]/',$clientdata.nif)) 
             && $cit.name == "es_idtype_3")
         || (isset($clientdata.nif) 
             && (preg_match('/^[0-9]/',$clientdata.nif)) 
             && $cit.name == "es_idtype_1"))
         }selected="selected"{/if}>{$lang[$cit.name]}
        {if $cit.price!=0}(
          {if $cit.fee!=0} {$cit.fee|price:$currency} {$lang[$cit.recurring]}
          {/if}
          {if $cit.setup!=0} {$cit.setup|price:$currency} {$lang.setupfee}
          {/if})
        {/if}
      </option>
    {/if}
  {/foreach}
</select>
{if $cf.config.conditionals}
  <script type="text/javascript">
   $('.custom_field_{$cf.id}').fieldLogic({literal}{{/literal}type: '{$cf.type}'{literal}}{/literal},[{foreach from=$cf.config.conditionals item=cd name=cond}{literal}{{/literal}
     value: '{$cd.targetval}',
     condition_type: '{$cd.condition}',
     target: '.custom_field_{$cd.target}',
     condition: '{if $cd.conditionval}{$cd.conditionval}{else}{$cd.val}{/if}',
     action: '{$cd.action}'
     {literal}}{/literal}{if !$smarty.foreach.cond.last},{/if}{/foreach}]);
  </script>
{/if}
